<div class="notification">
  <div class="notification-list">
    <div class="notification-list-profile">
    <%= render partial: 'layouts/profile_avatar', locals: {user: notification.visitor, a: 50, b: 50} %>
    </div>
    <div class="notification-list-comment">
      <span>
        <%= notification.visitor.username %>さんが
        <% case notification.action %>
        <% when 'follow' then %>
          あなたをフォローしました。
        <% when 'like' then %>
          あなたの<%= link_to '投稿', user_daily_path(current_user.id, notification.daily.id) %>にいいねしました。
        <% when 'comment' then %>
          <%# 通知の日記投稿者が自分の場合 %>
          <% if notification.daily.user_id == notification.visited.id %>
            <%= notification.visitor.username %>があなたの
            <%= link_to '投稿', user_daily_path(current_user.id, notification.daily.id) %>
            にコメントしました
          <% else %>
            <%= notification.visitor.username %>が
            <%= notification.daily.user.username %>の
            <%= link_to '投稿', user_daily_path(current_user.id, notification.daily.id) %>
            にコメントしました
          <% end %>
        <% end %>
      </span>
    </div>
  </div>
</div>